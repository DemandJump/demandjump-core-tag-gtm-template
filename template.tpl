___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "DemandJump Core Tag",
  "categories": ["ADVERTISING", "ANALYTICS", "ATTRIBUTION", "CONVERSIONS","MARKETING"],
  "brand": {
    "id": "demandjump",
    "displayName": "DemandJump",
    "thumbnail": "data:image/jpeg;base64,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I/1RhzcGAwgujCLxfL/mb//aAAwDAQACAAMAAAAQ8888888888888888888888888888888888888888888888888888888888888888888888888888888sAAAAAwAAAAQEw888888888888AAAAAAAAAAAAA088888888888AAAAAAAAAAAAAAU8888888888AAAMMMMMMMEAAAE8888888888AAU88888888sMMM8888888888AAU888888888O++Z888888888AAU888888888W+86888888888AAU888888888W+89888888888AAU888888888W+89888888888AAU888888888W+89888888888AAU888888888W+89888888888AAU888888888W+89888888888AAU88888888iW+88888888888AAU8888888OKW+8j888888888AAU88888Ip/oW+5O888888888AAU8xMWzSA/oW8t8888888888AAUxz/8AgAAP6Fnu/PPPPPPPPOAAFBjcvWTcfzjIvPPPPPPPPPPPPPPDfDfDXDfPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPPP/xAAoEQEAAAUDAwQCAwAAAAAAAAABABExobEQIWFAQZEwccHRUfFgcIH/2gAIAQMBAT8Q/tkjSElHs+8frn7j9c/cAACzpTZ6a4Z1v3PTXDOt256a4Z1u3PTXDOt256a4Z1u3PTXDOt256XcgQrwS2i4Z1Hnc9JLrd0Plg8s1GfiLhnV2PxPyz6KSEOYJZ9lfNIUvNe8WTiLhnSu8soMaRt60yJUwcsbClcH3ARzDI79w+YmJLmLJhhrFk4i4Z0UJV2+T6yXQlQZd2K6P+w7WNLr5NLJhhrFk4i4ZgsUjf24gCBIPWfWeByxyfDA2Sku3EcnwwZanOkt6kcnwxNqJh294Z1fhgU0A7pLMTh7lQ7bs9/zACRT15RIiUSNJGkj+K//EACkRAAEDAgQFBAMAAAAAAAAAAAEAEbExoRAhQMEwQWFxkVGB0fFgcPD/2gAIAQIBAT8Q/bJ+5gBqOY7L7QfC+0Hwio5YNXtprJGNsI01kjGFGmskYwo01kjGFGmskYwo01kjGFGlMJoGA6qyRjCjSPk5DU7BN3YBlZIxEQPVvGWifCJ6I1lZqeEJgYBVO4lWSMCtoAjEKp47oRPRUIO4/CN8w5nlyKaAAV0dkKKp3EqyRgI3aZnYcYKMl+YfkFQweymzhb7HC6OyFFU7hWSEcEc7f3oiE5rxhgIZ7BdL5CMAhs5XS+QjH4Ztiul8hNMHM7INU+QjIMlxTNNxyAB+ft6Ikkufyv8A/8QAKxABAAECBAQGAwEBAQAAAAAAAREAUSExQPAgQWGBEHGRocHxMFCx0YDh/9oACAEBAAE/EP8Ai8EMyAoovNMMWmy5cuXLly5cuVixe5cuXLly5cqkdd+IqROgh9wCgiLkJHufsUl/Xyg+Zk96eDyUgfPI9oonzAlirJmPn+xSczjywFkyTo1AiTn7v+P7+xSLAYUQicyogAY+ELbY/sUhP1IQoyRqZQGAyjyPz18z9ikTV5jwfNeZ8NRHZfo36/sUjzOyksv9Ie7qUiZ6QFfRa+i19Fr6LX0WvotfRa+i19Fr6LX0WvotfRa+i0EUSOQcaUwLOIBdkx3/AAG9QMDm8B6LQAgiSJz1CTaL6GE3FIyWJn55+eVTfFPl/p141mjrmXm8wHvqEm0X0UAomITzR1TM71tf4ra/xW1/itr/ABW1/itr/FRWGnpADE7TqEm0X0bKIBwG0jHs0WCn19fr6/X1+vrwyqAxBYHCntqEm0X0TlQoIBu6jWbwtmOE9YYMdOk2i+ieP7sllOnSbRfRPH92SymjTJNovonj+7hdRp0m0X0Tx/dguo06TaL6J4/uwXUadJtF9E8f3YLqNOk2i+ieP7sF1GnSbRfRPH92C6jTpNovonj+7BdRp0m0X0Tx/dguo06TaL6J4/uwXUadJtF9Tt2C6jTpNovoYovQAHOEPOEe/Gl3q2jN06TaL6HF1ZTMMOxm+maVmK1kRl48s8TmHmv8oo0yTaL6AD0ss1cg5q4BTRs+ZJJl1Wa83oBWR47tEEhKLuJ/tBp0m0X/ADl4DAMbY5vsc4KkgcjkF25f0grPH8Au1mAAXyD7r1q+nSbRf8i9fCV93sJwMcsKSrMBl2gDbWbj4e98T9fosBmrkUCIloZIMXdl1CTaL/jWDFinXLSJ6vYWelLYxDFF1zFDQMq6vPgPe+F+8qaKlK5RcHngfJVPKKnTpNovwjPisZ1yRNppV7hUgJkyMTIakNkEixb2BY6eO7XcHvfC/TFgppFGJzw+ye66lJtF/GS5XQetAZRGHHGlkiKAZksS70AGdW9agyh5eHkPlTfDK5uq1tFuDu13B73wv1MkpQwDEOpgXrBejUpNovRX3CgClk4OC0dAG5gqemTmBnsMVL4nM4hOebW1XrdruDTsluDu13B734v1u0NMLBwsHVjB3yGiSLtl265rzaM9Sk2i/DU2K9btdwadktwd2u4PefF+zsEHbs/gd4oxmMc3MNzX/wAMArG9ctSk2i/DUyu+ayu6VRUUoap2i3Bl4wQ1PvaS5UvoyQMWl4cp6BsnQx8qwBxgBWEaUVIYxhHMHLE9a3l8VvL4reXxW8vit5fFIKQFVveVASZfx1gGLhRefFWLGUvKQXBgDTCPkyUIkE8d25dzxACEkBODRO00PTITBjJ4LVo0vMNywgBis4R4bgIS2D1aE5c5cOwvsrEV1QWEBcXLODypgZiIRAE5kwMKCHw5a2CxUFioLHhBYqCxUFioLFIOdQWKgsVBY8ILFQWP+OP/2Q\u003d\u003d"
  },
  "description": "Demandjump core tag for new Rudderstack arcitecture.",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "appId",
    "displayName": "DemandJump App ID",
    "simpleValueType": true,
    "help": "The App ID must follow this pattern: 123######-##",
    "valueValidators": [
      {
        "type": "REGEX",
        "args": [
          "[0-9]{10}-[0-9]{2}"
        ]
      }
    ],
    "valueHint": "Your Demandjump App ID can be found in the Demandjump app under Settings \u003e Core Javascript Tag."
  },
  {
    "type": "TEXT",
    "name": "userEmail",
    "displayName": "User Email Address",
    "simpleValueType": true,
    "canBeEmptyString": false
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

// Enter your template code here.
const log = require('logToConsole');
const InjectScript = require('injectScript');
const copyFromWindow = require('copyFromWindow');
const setInWindow = require('setInWindow');
var appId = data.appId;
var userEmail = data.userEmail;
var rudderanalytics = copyFromWindow('rudderanalytics') || [];
var methods = [
  "load",
  "page",
  "track",
  "identify",
  "alias",
  "group",
  "ready",
  "reset",
  "getAnonymousId",
  "setAnonymousId"
];

for (var i = 0; i < methods.length; i++) {
    var method = methods[i];
    rudderanalytics[method] = function (methodName) {
          return function () {
            var argArr = [];
            for (var a = 0; a < arguments.length; a++){
              argArr.push(arguments[a]);
            }
            rudderanalytics.push([methodName].concat(argArr));
          };
        }(method);
}

rudderanalytics.load(
  "1oFiDtXyVqYjTSYvGKYOk7ZdcwO",
  "https://ingest.eng.demandjump.net/",
{
  sendAdblockPage: true
});

log(userEmail);

rudderanalytics.page(
{
  app_id:appId,
  email_address: userEmail
}
);

setInWindow('rudderanalytics',rudderanalytics, true);

InjectScript('https://cdn.rudderlabs.com/v1/rudder-analytics.min.js',data.gtmOnSuccess(),data.gtmOnFailure(),'DJRudderstack');


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "access_globals",
        "versionId": "1"
      },
      "param": [
        {
          "key": "keys",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 3,
                "mapKey": [
                  {
                    "type": 1,
                    "string": "key"
                  },
                  {
                    "type": 1,
                    "string": "read"
                  },
                  {
                    "type": 1,
                    "string": "write"
                  },
                  {
                    "type": 1,
                    "string": "execute"
                  }
                ],
                "mapValue": [
                  {
                    "type": 1,
                    "string": "rudderanalytics"
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  },
                  {
                    "type": 8,
                    "boolean": true
                  }
                ]
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "inject_script",
        "versionId": "1"
      },
      "param": [
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://cdn.rudderlabs.com/v1/rudder-analytics.min.js"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios:
- name: Untitled test 1
  code: |-
    const mockData = {
      appId:'1230010001-01'
    };

    // Call runCode to run the template's code.
    runCode(mockData);

    // Verify that the tag finished successfully.
    assertApi('gtmOnSuccess').wasCalled();


___NOTES___

Created on 2/22/2021, 12:03:33 PM


